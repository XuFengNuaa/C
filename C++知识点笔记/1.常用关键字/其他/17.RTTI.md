运行时类型识别RTTI

让程序在运行时能根据基类的指针或引用来获得该指针或引用所指的对象的实际类型。

通过typeid操作符识别出所有的基本类型（int，指针等）的变量对应的类型。

C++通过以下的两个操作提供RTTI：

（1）typeid运算符，该运算符返回其表达式或类型名的实际类型。

（2）dynamic_cast运算符，该运算符将基类的指针或引用安全地转换为派生类类型的指针或引用。

#### typeid

用户并不能自己定义一个type_info的对象，而只能通过typeid运算符返回一个对象的const引用来使用type_info的对象。因为其只声明了一个构造函数（复制构造函数）且为private，所以编译器不会合成任何的构造函数，而且赋值操作运行符也为private。这两个操作就完全禁止了用户对type_info对象的定义和复制操作，用户只能通过指向type_info的对象的指针或引用来使用该类。

**当类中不存在虚函数时**，typeid是编译时期的事情，也就是静态类型

**当类中存在虚函数时**，typeid是运行时期的事情，也就是动态类型

多态类的对象的类型信息保存在虚函数表的索引的-1的项中，该项是一个type_info对象的地址，该type_info对象保存着该对象对应的类型信息，每个类都对应着一个type_info对象。

<img src="C:\Users\ZJH\Desktop\课件\C++知识点笔记\1.常用关键字\pic\typeinfo.png" alt="typeinfo" style="zoom:67%;" />

dynamic_cast见类型转换
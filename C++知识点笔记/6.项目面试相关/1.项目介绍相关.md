#### 为什么要做这样一个项目

说实话，这个项目没有非常大的亮点，主要是为了巩固基础，动手实践之前学习的知识，希望能系统的串联起来。

这个项目虽然代码量不算太多，其中也用到了EPOLL复用，线程池，数据库连接池等技术，webbench压力测试也可以实现上万的qps。

完成这个项目提高了我对网络编程，网络协议，和多线程的理解。

另外，由于是第一次完整的实现这个项目，过程中遇到了一些问题，比如错误使用优雅关闭连接导致的压测失败，writev的手动偏移导致的大文件传输Bug，ET没有通过while接收，而导致的接受问题等等...

#### 介绍下你的项目

本项目实现了一个轻量级的web端，提供用户注册，登录等功能。

在并发模型上，采用epoll边沿触发模式来实现IO复用，使用同步IO模拟Proactor事件处理模式，实现半同步/半反应堆线程池，主线程为异步线程，负责监听文件描述符，接收socket新连接，若当前监听的socket发生了读写事件，然后将任务插入到请求队列。工作线程从请求队列中取出任务，进行处理

使用有限状态机的设计思想，封装了http连接处理类，以实现解析报文请求和发送。其中,主状态机在内部调用从状态机,从状态机将处理状态和数据传给主状态机，支持http长连接，支持解析GET和POST请求

由于非活跃连接占用了连接资源，严重影响服务器的性能，基于双向链表实现一个服务器定时器，处理这种非活跃连接，释放连接资源。

此外，使用单例模式创建日志系统，对服务器运行状态、错误信息和访问数据进行记录，支持按天分类，超行分类功能，可以根据实际情况分别使用同步和异步写入两种方式。其中异步写入方式，将生产者-消费者模型封装为阻塞队列，创建一个写线程，工作线程将要写的内容push进队列，写线程从队列中取出内容，写入日志文件。

建立数据库连接池，并实现注册操作

系统架构

![微信图片_20200625155926](C:\Users\ZJH\Desktop\课件\C++知识点笔记\6.项目面试相关\pic\微信图片_20200625155926.jpg)
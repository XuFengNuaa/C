### 压测相关

#### 服务器并发量测试过吗？怎么测试的？

有的，使用webbench，在关闭日志后，使用Webbench对服务器进行压力测试，对listenfd和connfd分别采用ET和LT模式，均可实现上万的并发连接。

webbench -c 10500 -t 5 http://121.48.164.15:9006/

#### webbench是什么？介绍一下原理

Webench是一款轻量级的网站测压工具，最多可以对网站模拟3w左右的并发请求，可以控制时间、是否使用缓存、是否等待服务器回复等等，且对中小型网站有明显的效果，基本上可以测出中小型网站的承受能力，对于大型的网站，如百度、淘宝这些巨型网站没有意义，因为其承受能力非常大。同时测试结果也受自身网速、以及自身主机的性能与内存的限制，性能好、内存大的主机可以模拟的并发就明显要多。

基本原理：父进程fork若干个子进程，每个子进程在用户要求时间或默认的时间内对目标web循环发出实际访问请求，父子进程通过管道进行通信，子进程通过管道写端向父进程传递在若干次请求访问完毕后记录到的总信息，父进程通过管道读端读取子进程发来的相关信息，子进程在时间到后结束，父进程在所有子进程退出后统计并给用户显示最后的测试结果，然后退出。

<img src="C:\Users\ZJH\Desktop\课件\C++知识点笔记\6.项目面试相关\pic\webbench.png" alt="webbench" style="zoom:150%;" />

#### 测试的时候有没有遇到问题？

大文件、epoll accept问题
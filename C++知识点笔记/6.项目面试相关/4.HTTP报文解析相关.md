#### 用了状态机啊，为什么要用状态机？

服务器可以根据不同状态或者消息类型进行相应的处理逻辑，使得程序逻辑清晰易懂

#### 状态机的转移图画一下

从状态机负责读取报文的一行，主状态机负责对该行数据进行解析，

主状态机内部调用从状态机，从状态机驱动主状态机。

![状态机](C:\Users\ZJH\Desktop\课件\C++知识点笔记\6.项目面试相关\pic\状态机.jpg)

**主状态机**

三种状态，标识解析位置。

- CHECK_STATE_REQUESTLINE，解析请求行
- CHECK_STATE_HEADER，解析请求头
- CHECK_STATE_CONTENT，解析消息体，仅用于解析POST请求

**从状态机**

三种状态，标识解析一行的读取状态。

- LINE_OK，完整读取一行
- LINE_BAD，报文语法有误
- LINE_OPEN，读取的行不完整

在HTTP报文中，每一行的数据由\r\n作为结束字符，空行则是仅仅是字符\r\n。因此，可以通过查找\r\n将报文拆解成单独的行进行解析，项目中便是利用了这一点。

从状态机负责读取buffer中的数据，将每行数据末尾的\r\n置为\0\0，并更新从状态机在buffer中读取的位置m_checked_idx，以此来驱动主状态机解析。

主状态机根据状态调用不同的函数对请求进行解析，并设置状态机的状态。

#### https协议为什么安全？

非对称加密算法（公钥和私钥）交换对称密钥+数字证书验证身份（验证公钥是否是伪造的）+利用对称密钥加解密后续传输的数据

#### https的ssl连接过程

![https](C:\Users\ZJH\Desktop\课件\C++知识点笔记\2.计算机网络总结\图片\https.png)

#### GET和POST的区别

我们可以这样理解：一个URL地址，它用于描述一个网络上的资源，而HTTP中的GET，POST，PUT，DELETE就对应着对这个资源的查，改，增，删4个操作。GET一般用于获取/查询资源信息，而POST一般用于更新资源信息。

*GET* - 从指定的资源请求数据,把传送的数据放在url中，大多数浏览器url长度在2K个字节，大多数服务器能处理最长64K字节的url，只产生一个TCP包，浏览器会把http header和data一并发送出去，服务器响应200（返回数据）；

*POST* - 向指定的资源提交要被处理的数据，把传送的数据放在body中，可以存放的数据多，浏览器先发送header，服务器响应100 continue，浏览器再发送data，服务器响应200 ok（返回数据）但是不同浏览器不一定是产生两个TCP包

![POST_GET](C:\Users\ZJH\Desktop\课件\计算机网络总结\图片\POST_GET.png)